# UAT Test: US-P1.1-007 - Create importMappingHistory mutations and queries

> Auto-generated: 2026-02-12 16:04
> Status: ‚è≥ Pending Execution

## Story
As the import system, I need to record column mapping decisions and query historical mappings to improve auto-mapping accuracy.

## Acceptance Criteria Checklist

- [ ] Add to packages/backend/convex/models/importSessions.ts (or create separate file if cleaner)
- [ ] Implement recordMappingHistory mutation (upsert: increment usageCount if exists, create if new)
- [ ] Implement getHistoricalMappings query (by normalizedColumnName and optional organizationId)
- [ ] Implement getBestMapping query (returns highest confidence mapping for a given column name)
- [ ] Normalize column names: lowercase, trim, remove special characters
- [ ] All queries use .withIndex() - never .filter()

## Playwright E2E Tests
- Run: `npx -w apps/web playwright test --config=uat/playwright.config.ts -g "US-P1.1-007"`
- Report: `npx -w apps/web playwright show-report uat/playwright-report`

## Notes
_Add testing observations here_

---
*Generated by Test Runner Agent*
