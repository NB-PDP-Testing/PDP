# UAT Test: US-P4.3-001 - Add AI mapping cache table to schema

> Auto-generated: 2026-02-15 22:27
> Status: ⏳ Pending Execution

## Story
As a developer, I need a table to cache AI column mapping results to avoid duplicate API calls and reduce costs.

## Acceptance Criteria Checklist

- [ ] Add aiMappingCache table to packages/backend/convex/schema.ts
- [ ] Fields: columnPattern (string - normalized column name), sampleValues (array of strings), suggestedField (string), confidence (number 0-100), reasoning (string), createdAt (number), expiresAt (number)
- [ ] columnPattern is normalized: lowercase, trim, remove special chars (e.g., 'First Name' → 'firstname')
- [ ] expiresAt = createdAt + 30 days (2592000000 ms)
- [ ] Add indexes: by_columnPattern, by_expiresAt
- [ ] Add cache cleanup index: by_expiresAt for periodic deletion of expired entries
- [ ] Run npx -w packages/backend convex codegen successfully

## Playwright E2E Tests
- Run: `npx -w apps/web playwright test --config=uat/playwright.config.ts -g "US-P4.3-001"`
- Report: `npx -w apps/web playwright show-report uat/playwright-report`

## Notes
_Add testing observations here_

---
*Generated by Test Runner Agent*
