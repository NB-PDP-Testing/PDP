# UAT Test: US-P2.3-001 - Create importSessionDrafts schema and model

> Auto-generated: 2026-02-13 21:55
> Status: ⏳ Pending Execution

## Story
As the import system, I need a table to persist wizard draft state across sessions.

## Acceptance Criteria Checklist

- [ ] Add importSessionDrafts table to packages/backend/convex/schema.ts
- [ ] Fields: userId (v.string()), organizationId (v.string()), step (v.number()), parsedHeaders (v.optional(v.array(v.string()))), parsedRowCount (v.optional(v.number())), mappings (v.optional(v.record(v.string(), v.string()))), playerSelections (v.optional(v.array(v.object({ rowIndex: v.number(), selected: v.boolean(), reason: v.optional(v.string()) })))), benchmarkSettings (v.optional(v.object({ applyBenchmarks: v.boolean(), strategy: v.string(), customTemplateId: v.optional(v.id('benchmarkTemplates')), passportStatuses: v.array(v.string()) }))), templateId (v.optional(v.id('importTemplates'))), sourceFileName (v.optional(v.string())), expiresAt (v.number()), lastSavedAt (v.number())
- [ ] Indexes: by_userId_and_orgId on [userId, organizationId], by_expiresAt on [expiresAt]
- [ ] Do NOT store raw parsed CSV data in the draft — too large. Store headers, row count, mappings, and selections only. User re-uploads the file on resume.
- [ ] Run npx -w packages/backend convex codegen to verify schema

## Playwright E2E Tests
- Run: `npx -w apps/web playwright test --config=uat/playwright.config.ts -g "US-P2.3-001"`
- Report: `npx -w apps/web playwright show-report uat/playwright-report`

## Notes
_Add testing observations here_

---
*Generated by Test Runner Agent*
