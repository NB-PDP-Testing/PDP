# UAT Test: US-P4.1-006 - Implement exponential backoff with jitter utility

> Auto-generated: 2026-02-15 20:57
> Status: â³ Pending Execution

## Story
As a developer, I need a reusable exponential backoff utility with jitter to prevent thundering herd problems when retrying failed requests.

## Acceptance Criteria Checklist

- [ ] Create packages/backend/convex/lib/federation/backoff.ts
- [ ] Export exponentialBackoff function: (attempt: number, baseDelayMs = 1000, maxDelayMs = 30000) => Promise<void>
- [ ] Formula: delay = min(baseDelayMs * 2^attempt, maxDelayMs)
- [ ] Add jitter: randomize delay between 50% and 100% of calculated delay
- [ ] Returns Promise that resolves after delay (use setTimeout in Node environment)
- [ ] Export withRetry wrapper: async withRetry<T>(fn: () => Promise<T>, maxAttempts = 3) => Promise<T>
- [ ] withRetry executes fn, retries with backoff on failure up to maxAttempts
- [ ] Throws original error if all retries exhausted
- [ ] Add TypeScript types and JSDoc comments
- [ ] Run npx ultracite fix and npm run check-types

## Playwright E2E Tests
- Run: `npx -w apps/web playwright test --config=uat/playwright.config.ts -g "US-P4.1-006"`
- Report: `npx -w apps/web playwright show-report uat/playwright-report`

## Notes
_Add testing observations here_

---
*Generated by Test Runner Agent*
