# UAT Test: US-P9-027 - Create Voting Card Component

> Auto-generated: 2026-02-01 11:30
> Status: ‚è≥ Pending Execution

## Story
UI component for displaying and interacting with team decisions.

## Acceptance Criteria Checklist

- [ ] Create apps/web/src/app/orgs/[orgId]/coach/team-hub/components/voting-card.tsx
- [ ] Create apps/web/src/app/orgs/[orgId]/coach/team-hub/components/voting-list.tsx
- [ ] Props: decisionId, organizationId, currentUserId, isHeadCoach
- [ ] Query getTeamDecisions and getDecisionVotes for real-time updates
- [ ] Card header: title, status badge (Open/Closed/Finalized), created by name, relative timestamp
- [ ] Deadline countdown if set (using date-fns)
- [ ] Options display: radio button OR checkmark (if user voted), label, vote count/points, percentage bar (Progress component), percentage text
- [ ] If decision open and user hasn't voted: show RadioGroup, 'Cast Vote' button (disabled until option selected), optional comment textarea
- [ ] Cast vote: show loading spinner, call castVote mutation, optimistic update, success toast on success, revert on error
- [ ] If user already voted: show checkmark on selected option, 'Change Vote' button
- [ ] Finalize button: only visible if isHeadCoach AND status=open, confirmation dialog ('This cannot be undone'), call finalizeDecision mutation
- [ ] Finalized state: winning option highlighted (green background), trophy icon, 'Finalized by [Name] on [Date]'
- [ ] Loading skeleton: CardSkeleton while loading
- [ ] Empty state: 'No team decisions yet' with CheckSquare icon
- [ ] Responsive: full width on mobile, progress bars adapt to container
- [ ] Type check passes
- [ ] Visual verification: votes cast, bars update, finalize works, confirmation dialog displays

## Test Scenarios

### Happy Path
1. Navigate to the feature
2. Perform the primary action described in the story
3. Verify all acceptance criteria are met
4. **Expected:** Feature works as described

### Edge Cases
1. Test with empty/null values
2. Test with boundary values
3. Test rapid repeated actions
4. **Expected:** Graceful handling, no errors

### Error Handling
1. Test with invalid inputs
2. Test without proper permissions
3. Test with network issues (if applicable)
4. **Expected:** Clear error messages, no crashes

## Visual Verification
- [ ] UI matches design expectations
- [ ] Responsive on mobile (if applicable)
- [ ] Loading states are appropriate
- [ ] Error states are user-friendly

## Notes
_Add testing observations here_

---
*Generated by Test Runner Agent*
