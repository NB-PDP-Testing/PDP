# Ralph Progress Log
Started: Sun 15 Feb 2026 20:33:18 GMT
---

## Codebase Patterns
**Last Updated**: 2026-02-15 20:40 - Iteration 1

### Architecture
- Turborepo monorepo: `apps/web/` (Next.js 14), `packages/backend/` (Convex)
- All routes scoped under `/orgs/[orgId]/`
- Better Auth for authentication, Convex for backend
- Organization data isolated via organizationId field

### Convex Backend Patterns
- NEVER use `.filter()` - always use `.withIndex()`
- All functions need `args` and `returns` validators
- Use `Id<"tableName">` types for Convex tables, `v.string()` for Better Auth IDs
- Index names include all fields: `by_orgId_and_status`
- Use batch fetch + Map lookup pattern for related data (no N+1 queries)
- Actions cannot access `ctx.db` - use `ctx.runQuery`/`ctx.runMutation`

### Frontend Patterns
- Use shadcn/ui components from `@/components/ui`
- Organization theming via CSS variables: `--org-primary`, etc.
- Use `useSearchParams` for filter state (URL persistence)

### Quality Checks (run in order)
1. `npx -w packages/backend convex codegen` - verify schema changes
2. `npm run check-types` - type checking
3. `npx ultracite fix` - auto-fix formatting
4. `npm run check` - lint check

### File Locations
- Convex schema: `packages/backend/convex/schema.ts`
- Convex queries/mutations: `packages/backend/convex/models/`
- Convex actions: `packages/backend/convex/actions/`
- Convex utilities: `packages/backend/convex/lib/`
- Import templates: `importTemplates` table (existing)
- Import sessions: `importSessions` table (existing)

---
