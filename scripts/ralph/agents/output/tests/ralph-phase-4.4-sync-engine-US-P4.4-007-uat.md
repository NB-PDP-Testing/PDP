# UAT Test: US-P4.4-007 - Add sync retry logic with exponential backoff

> Auto-generated: 2026-02-15 23:42
> Status: ‚è≥ Pending Execution

## Story
As the sync engine, I need to automatically retry failed syncs with exponential backoff so transient errors don't require manual intervention.

## Acceptance Criteria Checklist

- [ ] Add to packages/backend/convex/actions/federationSyncEngine.ts
- [ ] Add maxRetries field to syncQueue: default 3
- [ ] Add retryCount field to syncQueue: increments on each retry
- [ ] Add nextRetryAt field to syncQueue: timestamp for next retry attempt
- [ ] On sync failure, check if retryCount < maxRetries
- [ ] If retriable, calculate nextRetryAt using exponential backoff: 2^retryCount minutes
- [ ] Update syncQueue job with new retryCount and nextRetryAt
- [ ] Add cron job: processRetryQueue runs every 5 minutes
- [ ] processRetryQueue finds jobs with nextRetryAt < now and status=pending
- [ ] Retry each job by calling sync action again
- [ ] If maxRetries exhausted, mark job as permanently failed and notify admin
- [ ] Run npx -w packages/backend convex codegen

## Playwright E2E Tests
- Run: `npx -w apps/web playwright test --config=uat/playwright.config.ts -g "US-P4.4-007"`
- Report: `npx -w apps/web playwright show-report uat/playwright-report`

## Notes
_Add testing observations here_

---
*Generated by Test Runner Agent*
