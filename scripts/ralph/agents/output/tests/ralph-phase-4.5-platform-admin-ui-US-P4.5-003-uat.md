# UAT Test: US-P4.5-003 - Implement OAuth 2.0 setup wizard

> Auto-generated: 2026-02-16 11:33
> Status: ‚è≥ Pending Execution

## Story
As a platform admin, I need to complete OAuth 2.0 authorization flow with a federation API to obtain and store access tokens.

## Acceptance Criteria Checklist

- [ ] Create apps/web/src/app/platform-admin/connectors/[connectorId]/oauth-setup/page.tsx
- [ ] Step 1: Display connector info and OAuth endpoints
- [ ] Show 'Start Authorization' button
- [ ] On click, call startOAuthFlow action to get authorization URL
- [ ] Open authorization URL in new window/tab
- [ ] Step 2: User authorizes in federation system
- [ ] Callback URL: /platform-admin/connectors/oauth-callback
- [ ] Callback page extracts code and state from URL params
- [ ] Call completeOAuthFlow action with code and state
- [ ] Show loading spinner: 'Completing authorization...'
- [ ] Step 3: Display success or error
- [ ] On success, show: 'OAuth setup complete! Access token obtained and stored.'
- [ ] On error, show error message and 'Retry' button
- [ ] Validate state parameter matches to prevent CSRF attacks
- [ ] After success, redirect to connector edit page
- [ ] Run npx ultracite fix

## Playwright E2E Tests
- Run: `npx -w apps/web playwright test --config=uat/playwright.config.ts -g "US-P4.5-003"`
- Report: `npx -w apps/web playwright show-report uat/playwright-report`

## Notes
_Add testing observations here_

---
*Generated by Test Runner Agent*
