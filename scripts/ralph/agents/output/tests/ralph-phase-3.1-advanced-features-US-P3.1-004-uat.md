# UAT Test: US-P3.1-004 - Add admin override controls with audit trail

> Auto-generated: 2026-02-14 22:53
> Status: ‚è≥ Pending Execution

## Story
As an admin, I need to override confidence-based auto-linking decisions and have those overrides logged so I can correct algorithm mistakes.

## Acceptance Criteria Checklist

- [ ] Add 'Force Link' button to low-confidence matches (<40) in duplicate resolution UI
- [ ] Add 'Reject Link' button to high-confidence matches (60+) in duplicate resolution UI
- [ ] Override buttons only visible to users with admin or owner role
- [ ] Create adminOverrides table in schema.ts:
- [ ] - importSessionId, playerId, guardianId, action ('force_link' | 'reject_link'), reason (optional text), overriddenBy (userId), timestamp
- [ ] Add by_importSession and by_user indexes for querying overrides
- [ ] Store override in database before applying action
- [ ] Display override badge on duplicate card: 'Admin Override: Force Linked' or 'Rejected'
- [ ] Run npx -w packages/backend convex codegen after schema change
- [ ] Run npx ultracite fix before completion

## Playwright E2E Tests
- Run: `npx -w apps/web playwright test --config=uat/playwright.config.ts -g "US-P3.1-004"`
- Report: `npx -w apps/web playwright show-report uat/playwright-report`

## Notes
_Add testing observations here_

---
*Generated by Test Runner Agent*
