# UAT Test: US-P4.2-004 - Create GAA field mapping transformer

> Auto-generated: 2026-02-15 21:43
> Status: ⏳ Pending Execution

## Story
As a developer, I need to transform GAA Foireann field names and formats to match PlayerARC's schema for seamless import.

## Acceptance Criteria Checklist

- [ ] Create packages/backend/convex/lib/federation/gaaMapper.ts
- [ ] Implement transformGAAMember function: (gaaMember: GAAMember) => ImportRowData
- [ ] Field mappings:
- [ ] - memberId → externalIds.foireann
- [ ] - firstName → firstName (trim, titlecase)
- [ ] - lastName → lastName (trim, titlecase)
- [ ] - dateOfBirth → dateOfBirth (parse ISO date, validate YYYY-MM-DD)
- [ ] - email → email (lowercase, validate format)
- [ ] - phone → phone (normalize: remove spaces/dashes, add +353 if missing country code)
- [ ] - address → parse into street1, city, county, postcode, country='Ireland'
- [ ] - membershipNumber → validate format XXX-XXXXX-XXX
- [ ] - membershipStatus → map to enrollment status (Active/Lapsed → active/inactive)
- [ ] - joinDate → enrollmentDate (parse ISO date)
- [ ] Add validation errors to ImportRowData.errors array if any field invalid
- [ ] Handle missing required fields gracefully (firstName, lastName required)
- [ ] Add TypeScript types: GAAMember, ImportRowData
- [ ] Run npx ultracite fix

## Playwright E2E Tests
- Run: `npx -w apps/web playwright test --config=uat/playwright.config.ts -g "US-P4.2-004"`
- Report: `npx -w apps/web playwright show-report uat/playwright-report`

## Notes
_Add testing observations here_

---
*Generated by Test Runner Agent*
