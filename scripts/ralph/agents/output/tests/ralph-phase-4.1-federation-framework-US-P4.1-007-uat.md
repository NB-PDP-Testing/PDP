# UAT Test: US-P4.1-007 - Add connector organization management mutations

> Auto-generated: 2026-02-15 21:11
> Status: ‚è≥ Pending Execution

## Story
As an organization admin, I need to connect my organization to a federation connector and manage the connection settings.

## Acceptance Criteria Checklist

- [ ] Add to packages/backend/convex/models/federationConnectors.ts
- [ ] Implement connectOrganization mutation: adds organization to connector's connectedOrganizations array
- [ ] Args: connectorId, organizationId, federationOrgId (external federation organization ID)
- [ ] Sets enabledAt to current timestamp, lastSyncAt to null initially
- [ ] Validates organization not already connected to this connector
- [ ] Implement disconnectOrganization mutation: removes organization from connectedOrganizations array
- [ ] Does NOT delete sync history (keep audit trail)
- [ ] Implement updateLastSyncTime mutation: updates lastSyncAt timestamp after successful sync
- [ ] Implement getConnectedOrganizations query: returns organizations connected to a connector
- [ ] Implement getOrganizationConnectors query: returns connectors enabled for an organization
- [ ] All queries use .withIndex() or direct lookups
- [ ] Run npx -w packages/backend convex codegen and npm run check-types

## Playwright E2E Tests
- Run: `npx -w apps/web playwright test --config=uat/playwright.config.ts -g "US-P4.1-007"`
- Report: `npx -w apps/web playwright show-report uat/playwright-report`

## Notes
_Add testing observations here_

---
*Generated by Test Runner Agent*
