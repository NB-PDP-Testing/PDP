# UAT Test: US-P4.1-003 - Create connector CRUD mutations

> Auto-generated: 2026-02-15 20:56
> Status: ‚è≥ Pending Execution

## Story
As a platform admin, I need to create, update, and manage federation connectors including storing encrypted credentials.

## Acceptance Criteria Checklist

- [ ] Create packages/backend/convex/models/federationConnectors.ts
- [ ] Implement createConnector mutation with args: name, federationCode, authType, endpoints, syncConfig, templateId
- [ ] createConnector accepts credentials object (not encrypted - mutation handles encryption)
- [ ] createConnector calls encryptCredentials, stores result in file storage, saves storageId
- [ ] Implement updateConnector mutation: allows updating name, endpoints, syncConfig, templateId
- [ ] Implement updateConnectorCredentials mutation: re-encrypts and replaces credentials
- [ ] Implement deleteConnector mutation: soft delete (status = 'inactive'), does NOT delete credentials file
- [ ] Implement getConnector query: returns connector WITHOUT decrypted credentials
- [ ] Implement listConnectors query: by status, using by_status index
- [ ] All mutations include returns validators
- [ ] All queries use .withIndex() - never .filter()
- [ ] Run npx -w packages/backend convex codegen and npm run check-types

## Playwright E2E Tests
- Run: `npx -w apps/web playwright test --config=uat/playwright.config.ts -g "US-P4.1-003"`
- Report: `npx -w apps/web playwright show-report uat/playwright-report`

## Notes
_Add testing observations here_

---
*Generated by Test Runner Agent*
