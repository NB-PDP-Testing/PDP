# UAT Test: US-P1.2-004 - Add historical mapping lookup to mapper

> Auto-generated: 2026-02-12 18:12
> Status: â³ Pending Execution

## Story
As the import system, I need to check importMappingHistory for past successful mappings to improve accuracy for returning organizations.

## Acceptance Criteria Checklist

- [ ] Add to packages/backend/convex/lib/import/mapper.ts
- [ ] Create suggestMappingsWithHistory function that accepts a QueryCtx parameter
- [ ] Query importMappingHistory by normalizedColumnName and optional organizationId using indexes
- [ ] Historical matches return 80% confidence when usageCount >= 3, 70% when < 3
- [ ] Integrate into pipeline: exact -> alias -> historical -> fuzzy -> content analysis

## Playwright E2E Tests
- Run: `npx -w apps/web playwright test --config=uat/playwright.config.ts -g "US-P1.2-004"`
- Report: `npx -w apps/web playwright show-report uat/playwright-report`

## Notes
_Add testing observations here_

---
*Generated by Test Runner Agent*
