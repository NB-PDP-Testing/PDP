# UAT Test: US-P2.1-002 - Create issue detection and categorization

> Auto-generated: 2026-02-13 20:27
> Status: â³ Pending Execution

## Story
As the import system, I need to detect specific data issues and categorize them by severity for user review.

## Acceptance Criteria Checklist

- [ ] Add to packages/backend/convex/lib/import/dataQuality.ts
- [ ] Export categorizeIssues(issues) -> { critical, warnings, suggestions }
- [ ] Export type Issue = { rowIndex: number, field: string, severity: 'critical'|'warning'|'suggestion', message: string, value?: string, suggestedFix?: string }
- [ ] Critical issues: missing required fields (firstName, lastName, dateOfBirth), invalid email format, duplicate rows within dataset
- [ ] Warning issues: inconsistent phone format, missing optional but recommended fields (postcode, guardian email), inconsistent date formats across rows
- [ ] Suggestion issues: names not title-cased, missing middle names, standardize capitalization
- [ ] Each issue includes rowIndex for linking back to specific rows in the UI
- [ ] suggestedFix field populated where auto-fix is possible (reuse autoFixValue patterns from validator.ts)
- [ ] Run npx ultracite fix

## Playwright E2E Tests
- Run: `npx -w apps/web playwright test --config=uat/playwright.config.ts -g "US-P2.1-002"`
- Report: `npx -w apps/web playwright show-report uat/playwright-report`

## Notes
_Add testing observations here_

---
*Generated by Test Runner Agent*
