# UAT Test: US-P1.2-001 - Create CSV parser utility

> Auto-generated: 2026-02-12 18:12
> Status: â³ Pending Execution

## Story
As the import system, I need to parse CSV files with robust handling of edge cases including quoted fields, multi-line cells, and various delimiters.

## Acceptance Criteria Checklist

- [ ] Create packages/backend/convex/lib/import/parser.ts
- [ ] Implement parseCSV function that handles: comma/semicolon/tab/pipe delimiters, quoted fields with embedded commas, multi-line cells in quotes
- [ ] Implement detectDelimiter function that auto-detects the delimiter from file content
- [ ] Implement detectHeaderRow function using heuristic (first row with >50% string-like values)
- [ ] Return ParseResult type: { headers: string[], rows: Record<string, string>[], totalRows: number, detectedDelimiter: string }
- [ ] Handle empty rows and whitespace-only values gracefully
- [ ] NOTE: Use native string parsing - do NOT add npm dependencies like papaparse (Convex runtime restrictions)

## Playwright E2E Tests
- Run: `npx -w apps/web playwright test --config=uat/playwright.config.ts -g "US-P1.2-001"`
- Report: `npx -w apps/web playwright show-report uat/playwright-report`

## Notes
_Add testing observations here_

---
*Generated by Test Runner Agent*
